apiVersion: v1
kind: Secret
metadata:
  name: userprofile-secrets
  namespace: userprofile
type: Opaque
stringData:
  # ⚠️⚠️⚠️ 安全警告 ⚠️⚠️⚠️
  # 生产环境必须修改以下所有密码!
  # 密码要求:
  # - 至少16位
  # - 包含大小写字母、数字、特殊字符
  # - 不要使用默认值或简单密码
  #
  # 推荐使用以下命令生成强密码:
  # openssl rand -base64 32

  # 数据库密码 - ⚠️ 必须修改!
  postgres-password: "change-me-in-production-use-strong-password-min-16-chars"
  mongodb-password: "change-me-in-production-use-strong-password-min-16-chars"
  redis-password: ""  # 如果需要Redis密码，请在此设置强密码

  # JWT密钥（至少256位） - ⚠️ 必须修改!
  jwt-secret: "change-me-generate-with-openssl-rand-base64-32-min-256-bits-very-long-secret-key"

  # 数据库连接字符串
  postgres-url: "jdbc:postgresql://postgres:5432/userprofile"
  mongodb-url: "mongodb://mongodb:27017/userprofile"
  redis-host: "redis"

---
apiVersion: v1
kind: ConfigMap
metadata:
  name: userprofile-config
  namespace: userprofile
data:
  # 应用配置
  SPRING_PROFILES_ACTIVE: "prod"
  TZ: "Asia/Shanghai"

  # JWT配置
  JWT_EXPIRATION: "86400000"  # 24小时
  JWT_REFRESH_EXPIRATION: "604800000"  # 7天

  # Redis配置
  REDIS_PORT: "6379"
  REDIS_DATABASE_GATEWAY: "2"
  REDIS_DATABASE_TAG: "1"
  REDIS_DATABASE_PROFILE: "0"

  # 日志配置
  LOGGING_LEVEL_ROOT: "INFO"
  LOGGING_LEVEL_APP: "DEBUG"

  # Actuator配置
  MANAGEMENT_ENDPOINTS_WEB_EXPOSURE_INCLUDE: "health,info,metrics"
  MANAGEMENT_ENDPOINT_HEALTH_SHOW_DETAILS: "always"

  # 限流配置
  RATE_LIMITER_REPLENISH_RATE: "100"
  RATE_LIMITER_BURST_CAPACITY: "200"

  # 缓存配置
  CACHE_TTL_HOURS: "1"
